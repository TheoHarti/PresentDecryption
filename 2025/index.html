<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Weihnachtsrätsel 2025</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>Weihnachtsrätsel 2025</h1>
    <p class="note">Vier Rätsel, vier Codes, ein Decoder.</p>
  </header>

  <nav>
    <a href="#" data-target="start" onclick="showPage(event)">Start</a>
    <a href="#" data-target="terminal" onclick="showPage(event)">Text-Abenteuer</a>
    <a href="#" data-target="beep" onclick="showPage(event)">Beep Bep Beep</a>
    <a href="#" data-target="password" onclick="showPage(event)">Passwort eingeben</a>
    <a href="#" data-target="einstein" onclick="showPage(event)">Einstein-Rätsel</a>
    <a href="#" data-target="decoder" onclick="showPage(event)">Decoder</a>
  </nav>

  <section id="start" class="page active">
    <div class="card">
      <h2>Willkommen</h2>
      <p>Es gibt verschiedene Rätsel die ihr Lösen müsst um eure Geschenke entschlüsseln zu können.
        Ihr könnt oben mit den Buttons zwischen den 4 Rätseln und dem Decoder wechseln.</p>
        Für jedes gelöste Rätsel bekommt ihr einen 4-stelligen Code. 
        Das sind die Rätsel:</p>
      <ol>
        <li>Text-Abenteuer</li>
        <li>Beep Bep Beep</li>
        <li>Passwort eingeben</li>
        <li>Einstein-Rätsel</li>
      </ol>
      <p>Notiert jeden Code. Im Decoder tragt ihr alle vier Codes und den verschluesselten Namen vom Geschenk ein, dann erhaltet ihr den Klartext.</p>
      <p class="note">Tipp: Desktop im Querformat ist am bequemsten.</p>
    </div>
  </section>

  <section id="terminal" class="page">
    <div class="card">
      <h2>Rätsel 1: Text-Abenteuer</h2>
      <p>Es gilt mittels Textbefehlen ein Abenteuer zu bestehen. 
        Erkunde einen geheimnisvollen Wald. 
        Gib Befehle wie <span class="tag">umsehen</span>, <span class="tag">gehe nach *richtung*</span>, <span class="tag">nimm *gegenstand*</span>, <span class="tag">betrete *ort*</span>, etc. 
        Mit dem Hinweis <span class="tag">hilfe</span> bekommst du nochmal alle möglichen Befehle angezeigt.
        Neustarten geht mit <span class="tag">restart</span>.</p> 
        Groß- oder Kleinschreibung erlaubt, Umlaute oder Umformulierung erlaubt, ganze Sätze auch!</p>
        Falls es mal nicht weitergeht, probiere verschiedene Aktionen aus und erkunde alle Wege. 
        Manche Befehle führen zu nichts, andere bringen dich weiter. 
        Das umsehen ist immer eine gute Idee, um Hinweise zu finden.
        Am Ende des Abenteuers erhältst du einen vierstelligen Code.</p>
        <div class="terminal">
        <div id="terminalLog" class="terminal-log"></div>
        <input id="terminalInput" class="terminal-input" placeholder="Befehl eingeben und Enter drücken" onkeydown="if(event.key==='Enter'){handleTerminalCommand();}" autocomplete="off" />
      </div>
      <p id="terminalCodeHint" class="digit-pill"></p>
    </div>
  </section>

  <section id="beep" class="page">
    <div class="card">
      <h2>Beep Bep Beep</h2>
      <div class="beep-list">
        <div class="beep-item">
          <span class="digit-pill">Clip 1</span>
          <audio controls preload="auto" src="morseSounds/morseNr1.wav"></audio>
        </div>
        <div class="beep-item">
          <span class="digit-pill">Clip 2</span>
          <audio controls preload="auto" src="morseSounds/morseNr2.wav"></audio>
        </div>
        <div class="beep-item">
          <span class="digit-pill">Clip 3</span>
          <audio controls preload="auto" src="morseSounds/morseNr3.wav"></audio>
        </div>
        <div class="beep-item">
          <span class="digit-pill">Clip 4</span>
          <audio controls preload="auto" src="morseSounds/morseNr4.wav"></audio>
        </div>
      </div>
    </div>
  </section>

  <section id="password" class="page">
    <div class="card password-card">
      <h2>Rätsel 3: Passwort-Spiel</h2>
      <p class="password-hint">Bitte wähle ein Passwort aus das alle Regeln erfüllt.</p>
      <p id="passwordCode" class="digit-pill"></p>
      <input id="passwordInput" class="password-input" placeholder="Passwort hier eintippen" oninput="checkPassword()" autocomplete="off" />
      <div id="ruleCounter" class="rule-counter"></div>
      <ul id="rules" class="rule-list"></ul>
    </div>
  </section>

  <section id="einstein" class="page einstein-wide">
    <div class="card">
      <h2>Rätsel 4: Visuelles Einstein-Rätsel</h2>
      <p>Vier Hauser, vier Kategorien (Farbe, Beruf, Tier, Getraenk). Zieht die Plaketten per Drag & Drop auf die passenden Felder. Pro Kategorie wird markiert, sobald alle Zuordnungen dieser Kategorie korrekt liegen. Wenn alles stimmt, erscheint der Code.</p>
      <div class="einstein-layout">
        <div class="einstein-houses" id="einsteinHouses"></div>
        <div class="einstein-bank-col">
          <div class="card subcard">
            <h3>Plaketten</h3>
            <p class="note">Zieht eine Plakette auf ein Feld. Falsche Zuordnung? Einfach zurück in die Ablage ziehen.</p>
            <div id="tileBank" class="tile-bank"></div>
          </div>
          <div class="card subcard code-card">
            <div class="code-label">Code</div>
            <div id="einsteinCode" class="digit-pill big-pill">_ _ _ _</div>
            <div id="einsteinStatus" class="note"></div>
          </div>
        </div>
        <div class="einstein-clue-col">
          <div class="card subcard">
            <h3>Hinweise</h3>
              <ul class="clue-list">
                <li>Die Pilotin wohnt in Haus 1, aber weder im grünen noch im gelben Haus.</li>
                <li>Das Haus, in dem Kaffee getrunken wird, steht ganz links.</li>
                <li>Es gibt genau ein Haus rechts von der Eule und links von dem Pinguins.</li>
                <li>Der Wal lebt im roten Haus, welches ein direkter Nachbar des blauen Hauses ist.</li>
                <li>Die Person, die Limo trinkt, wohnt genau zwischen der Kaffeetrinkerin und der Person, die Kakao genießt.</li>
                <li>Die Taucherin wohnt im grünen Haus.</li>
                <li>Der Bäcker wohnt so weit wie möglich von der Pilotin entfernt.</li>
                <li>Die Person mit dem Fuchs ist dieselbe, die auch Tee trinkt.</li>
                <li>Das gelbe Haus ist das Zuhause des Bäckers.</li>
                <li>Der Programmierer ist der unmittelbare linke Nachbar der Taucherin.</li>
                <li>Das blaue Haus ist nicht das Haus, in dem Kakao getrunken wird.</li>
              </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="decoder" class="page">
    <div class="card">
      <h2>Decoder</h2>
      <p>Tragt die vier Codes (Reihenfolge wie in der Navigation) und den verschlüsselten Namen ein. Ergebnis erscheint darunter.</p>
      <div>
        <label>Code 1 (Text-Abenteuer):</label>
        <input id="code1" class="code-input" maxlength="4" placeholder="z.B. 1111">
      </div>
      <div>
        <label>Code 2 (Beep Bep Beep):</label>
        <input id="code2" class="code-input" maxlength="4" placeholder="z.B. 2222">
      </div>
      <div>
        <label>Code 3 (Passwort-Spiel):</label>
        <input id="code3" class="code-input" maxlength="4" placeholder="z.B. 3333">
      </div>
      <div>
        <label>Code 4 (Einstein-Rätsel):</label>
        <input id="code4" class="code-input" maxlength="4" placeholder="z.B. 4444">
      </div>
      <div style="margin-top:10px;">
        <label>Verschlüsselter Name (in GROSSBUCHSTABEN):</label>
        <input id="encryptedName" class="name-input" placeholder="z.B. THEODOR">
      </div>
      <button class="btn" onclick="finalDecrypt()">Entschlüsseln</button>
      <div id="decryptedResult" class="result-box"></div>
    </div>
  </section>

  <script src="app.js"></script>
  <script src="terminal-riddle.js"></script>
  <script src="password-riddle.js"></script>
  <script src="einstein-riddle.js"></script>
  <script src="decoder.js"></script>
</body>
</html>
